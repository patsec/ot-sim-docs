
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A place for OT-sim users to call home.">
      
      
        <meta name="author" content="activeshadow and dnkcom">
      
      
      
        <link rel="prev" href="../modbus/">
      
      
        <link rel="next" href="../node_red/">
      
      
      <link rel="icon" href="../images/favicon.ico">
      <meta name="generator" content="mkdocs-1.5.2, mkdocs-material-9.3.1">
    
    
      
        <title>Module Development - OT-sim documentation</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.046329b4.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.85d0ee34.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../stylesheets/style.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#module-development" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="OT-sim documentation" class="md-header__button md-logo" aria-label="OT-sim documentation" data-md-component="logo">
      
  <img src="../images/patria.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            OT-sim documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Module Development
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12 20 8.69Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="amber"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 2c-1.05 0-2.05.16-3 .46 4.06 1.27 7 5.04 7 9.54 0 4.5-2.94 8.27-7 9.54.95.3 1.95.46 3 .46a10 10 0 0 0 10-10A10 10 0 0 0 9 2Z"/></svg>
      </label>
    
  
</form>
      
    
    
    
    
      <div class="md-header__source">
        <a href="https://github.com/patsec/ot-sim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    patsec/ot-sim
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="OT-sim documentation" class="md-nav__button md-logo" aria-label="OT-sim documentation" data-md-component="logo">
      
  <img src="../images/patria.png" alt="logo">

    </a>
    OT-sim documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/patsec/ot-sim" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    patsec/ot-sim
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Operational Technology (OT) Simulator
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../cpu/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CPU Module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../dnp3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DNP3 Module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Example Devices
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../getting_started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../ground_truth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ground Truth Module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../io/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    I/O Module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../logic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Logic Module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../message_bus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Message Bus
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../modbus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modbus Module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Module Development
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Module Development
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#message-bus-interfaces" class="md-nav__link">
    Message Bus Interfaces
  </a>
  
    <nav class="md-nav" aria-label="Message Bus Interfaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#message-bus-pusher" class="md-nav__link">
    Message Bus Pusher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-bus-subscriber" class="md-nav__link">
    Message Bus Subscriber
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-pusher" class="md-nav__link">
    Metrics Pusher
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-execution-and-logging" class="md-nav__link">
    Module Execution and Logging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-metrics" class="md-nav__link">
    Module Metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-exchange" class="md-nav__link">
    Message Exchange
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-schemas" class="md-nav__link">
    Message Schemas
  </a>
  
    <nav class="md-nav" aria-label="Message Schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#envelope-schema" class="md-nav__link">
    Envelope Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime" class="md-nav__link">
    RUNTIME
  </a>
  
    <nav class="md-nav" aria-label="RUNTIME">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#status-schema" class="md-nav__link">
    Status Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-schema" class="md-nav__link">
    Update Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-status-message" class="md-nav__link">
    Example Status Message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#health" class="md-nav__link">
    HEALTH
  </a>
  
    <nav class="md-nav" aria-label="HEALTH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metric-schema" class="md-nav__link">
    Metric Schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../node_red/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Node-RED Module
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../telnet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Telnet Module
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#message-bus-interfaces" class="md-nav__link">
    Message Bus Interfaces
  </a>
  
    <nav class="md-nav" aria-label="Message Bus Interfaces">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#message-bus-pusher" class="md-nav__link">
    Message Bus Pusher
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#message-bus-subscriber" class="md-nav__link">
    Message Bus Subscriber
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#metrics-pusher" class="md-nav__link">
    Metrics Pusher
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-execution-and-logging" class="md-nav__link">
    Module Execution and Logging
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#module-metrics" class="md-nav__link">
    Module Metrics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-exchange" class="md-nav__link">
    Message Exchange
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#message-schemas" class="md-nav__link">
    Message Schemas
  </a>
  
    <nav class="md-nav" aria-label="Message Schemas">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#envelope-schema" class="md-nav__link">
    Envelope Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#runtime" class="md-nav__link">
    RUNTIME
  </a>
  
    <nav class="md-nav" aria-label="RUNTIME">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#status-schema" class="md-nav__link">
    Status Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-schema" class="md-nav__link">
    Update Schema
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-status-message" class="md-nav__link">
    Example Status Message
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#health" class="md-nav__link">
    HEALTH
  </a>
  
    <nav class="md-nav" aria-label="HEALTH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#metric-schema" class="md-nav__link">
    Metric Schema
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<div><h1 id="module-development">Module Development<a class="headerlink" href="#module-development" title="Permanent link">¶</a></h1>
<p>OT-sim's modular architecture allows for the use of various programming languages for module development. As long as the programming language has a ZeroMQ implementation, programmers can use it to develop an OT-sim module.</p>
<p>Currently, the core OT-sim project leverages four separate programming languages: C, C++, Go, and Python. It also includes implementations of an interface to access the message bus in C++, Go, and Python, all of which are structured and operate similarly.</p>
<p>Custom OT-sim modules do not have to be developed within the framework of the core OT-sim project. As long as they are executables, can talk to the message bus using ZeroMQ, and can parse and generate the message schemas currently used by OT-sim, they should work as a module.</p>
<h2 id="message-bus-interfaces">Message Bus Interfaces<a class="headerlink" href="#message-bus-interfaces" title="Permanent link">¶</a></h2>
<p>As mentioned above, the core OT-sim project implements message bus utilities in C++, Go, and Python to simplify the development of custom OT-sim modules. These utilities include a message bus pusher, a message bus subscriber, and a metrics pusher.</p>
<h3 id="message-bus-pusher">Message Bus Pusher<a class="headerlink" href="#message-bus-pusher" title="Permanent link">¶</a></h3>
<p>This straightforward utility connects to the message bus using the <code>PUSH</code> socket type and pushes messages to a given topic. The goal of this utility is to cleanly manage the ZeroMQ socket used to interact with the message bus.</p>
<h3 id="message-bus-subscriber">Message Bus Subscriber<a class="headerlink" href="#message-bus-subscriber" title="Permanent link">¶</a></h3>
<p>This utility connects to the message bus using the <code>SUB</code> socket type, setting the topic to subscribe to and running as a separate thread to receive and process messages pushed to the message bus by other modules. In addition, users of this utility register a callback function for status and update messages to be called anytime the subscriber thread receives a message. The goal of this utility is to cleanly manage the ZeroMQ socket used to interact with the message bus and run as a separate thread without the developer having to worry about implementing the thread specifics.</p>
<h3 id="metrics-pusher">Metrics Pusher<a class="headerlink" href="#metrics-pusher" title="Permanent link">¶</a></h3>
<p>This utility provides methods for registering and updating metrics and periodically pushing registered metrics to the <code>HEALTH</code> topic on the message bus. This utility aims to provide an easily accessible metrics registry and create and manage a separate thread that periodically publishes metrics without the developer having to worry about implementing the thread specifics.</p>
<h2 id="module-execution-and-logging">Module Execution and Logging<a class="headerlink" href="#module-execution-and-logging" title="Permanent link">¶</a></h2>
<p>The CPU module provided by the core OT-sim project is capable of, but not required to, starting other OT-sim modules, monitoring them, and restarting them if they happen to die. If a developer anticipates always letting the CPU module start and monitor their custom OT-sim module, they can generate logs by simply writing to STDOUT or STDERR. The CPU module will monitor STDOUT and STDERR for the process and copy anything written to the logs it generates.</p>
<p>Suppose a developer does not anticipate always letting the CPU module start their custom module. In that case, they can push log messages to the <code>LOG</code> message bus topic, and the CPU will copy anything pushed to this topic to the logs it is generating. Log messages pushed to the <code>LOG</code> topic should, at the moment, be simple string messages — i.e., no outer envelope is needed.</p>
<h2 id="module-metrics">Module Metrics<a class="headerlink" href="#module-metrics" title="Permanent link">¶</a></h2>
<p>Module developers that wish to expose metrics for their module can use the metrics pusher utility to register and update metrics and periodically push registered metrics to the message bus for the <code>CPU</code> module to process. Metrics must be registered prior to being updated, but can be registered before or after starting the thread that will periodically push them.</p>
<div class="admonition example">
<p class="admonition-title">Example</p>
<p>Examples of registering metrics can be found <a href="https://github.com/patsec/ot-sim/blob/v1.0.0/src/c%2B%2B/dnp3/outstation.cpp#L15">here (C++)</a>, <a href="https://github.com/patsec/ot-sim/blob/v1.0.0/src/go/modbus/server/server.go#L130">here (Go)</a>, and <a href="https://github.com/patsec/ot-sim/blob/v1.0.0/src/python/otsim/io/io.py#L95">here (Python)</a>.</p>
<p>Examples of updating metrics can be found <a href="https://github.com/patsec/ot-sim/blob/v1.0.0/src/c%2B%2B/dnp3/outstation.cpp#L220">here (C++)</a>, <a href="https://github.com/patsec/ot-sim/blob/v1.0.0/src/go/modbus/server/server.go#L161">here (Go)</a>, and <a href="https://github.com/patsec/ot-sim/blob/v1.0.0/src/python/otsim/io/io.py#L116">here (Python)</a>.</p>
</div>
<h2 id="message-exchange">Message Exchange<a class="headerlink" href="#message-exchange" title="Permanent link">¶</a></h2>
<p>Modules exchange messages via the message bus using a limited number of message types or schemas encoded as JSON strings. Each message exchanged is contained within a message envelope whose schema is known by all modules and identifies the type of message included. Each module can determine how to decode the message within the envelope with this information. Modules should push these messages to the <code>RUNTIME</code> message bus topic.</p>
<p>The current approach to message generation is as follows:</p>
<ul>
<li>
<p>Status messages are generated and published to let other modules know about the device's current state or the system it is monitoring.</p>
</li>
<li>
<p>Update messages are generated and published when a module needs another module to actively modify the current state of the device or system it monitors.</p>
</li>
</ul>
<p>For example, the I/O module, a HELICS federate, generates status messages whenever it gets updates from other HELICS federates. It subscribes only to update messages from other modules and propagates any updates received out to other HELICS federates.</p>
<p>Similarly, the DNP3 module, when running in server mode, subscribes only to status messages from other modules and updates its internal DNP3 register database when new status messages are received. In addition, it generates update messages for additional modules to react to when a DNP3 client sends a control request.</p>
<h2 id="message-schemas">Message Schemas<a class="headerlink" href="#message-schemas" title="Permanent link">¶</a></h2>
<p>The envelope schema exchanges messages between modules via the <code>RUNTIME</code> and <code>HEALTH</code> topics.</p>
<h4 id="envelope-schema">Envelope Schema<a class="headerlink" href="#envelope-schema" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>type: object
required:
  - version
  - kind
  - metadata
  - contents
properties:
  version:
    type: string
    default: v1
    enum:
      - v1
  kind:
    type: string
    enum:
      - Status
      - Update
      - Metric
  metadata:
    type: object
    required:
      - sender
    additionalProperties:
      type: string
  contents:
    oneOf:
      - Status
      - Update
</code></pre></div>

<h3 id="runtime">RUNTIME<a class="headerlink" href="#runtime" title="Permanent link">¶</a></h3>
<p>Currently, only two types of messages are exchanged via the <code>RUNTIME</code> topic within the well-known envelope schema: <code>Status</code> and <code>Update</code>.</p>
<h4 id="status-schema">Status Schema<a class="headerlink" href="#status-schema" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>type: object
required:
  - measurements
properties:
  measurements:
    type: array
    items:
      type: object
      required:
        - tag
        - value
        - ts
      properties:
        tag:
          type: string
        value:
          type: number
          format: double
        ts:
          type: integer
          format: uint64
</code></pre></div>

<h4 id="update-schema">Update Schema<a class="headerlink" href="#update-schema" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>type: object
required:
  - updates
properties:
  updates:
    type: array
    items:
      type: object
      required:
        - tag
        - value
        - ts
      properties:
        tag:
          type: string
        value:
          type: number
          format: double
        ts:
          type: integer
          format: uint64
  recipient:
    type: string
  confirm:
    type: string
</code></pre></div>

<h4 id="example-status-message">Example Status Message<a class="headerlink" href="#example-status-message" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>{
  "version": "v1",
  "kind": "Status",
  "metadata": {
    "sender": "ot-sim-io"
  },
  "contents": {
    "measurements": [
      {
        "tag": "bus-692.voltage",
        "value": 1.046,
        "ts": 1657226316
      },
      {
        "tag": "line-650632.closed",
        "value": 1.0,
        "ts": 1657226316
      }
    ]
  }
}
</code></pre></div>

<h3 id="health">HEALTH<a class="headerlink" href="#health" title="Permanent link">¶</a></h3>
<p>Currently, only one type of message is exchanged via the <code>HEALTH</code> topic within the well-known envelope schema: <code>Metric</code>.</p>
<h4 id="metric-schema">Metric Schema<a class="headerlink" href="#metric-schema" title="Permanent link">¶</a></h4>
<div class="codehilite"><pre><span></span><code>type: object
required:
  - kind
  - name
  - desc
  - value
properties:
  kind:
    type: string
    enum:
      - Counter
      - Gauge
  name:
    type: string
  desc:
    type: string
  value:
    type: number
    format: double
</code></pre></div></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        

<footer class="md-footer">
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>

      <!-- Social links -->
      <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/patsec/ot-sim-docs" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.dfff1995.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.dff1b7c8.min.js"></script>
      
    
  </body>
</html>